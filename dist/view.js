!function(r,o){r.layui,layui.define&&layui.define(["layer","command","laytpl","element"],function(r){r("view",function(r,n,e,t){"use strict";var a=layui.$,i=layui.setter,u=(layui.vispa,{}),o={};return u.init=function(){o.color(),u.req({url:i.view+"/layout.html",type:"get",dataType:"html",success:function(o){u.req({url:layui.cache.base+"nav.json",type:"get",done:function(r){e(o).render({config:i,nav:r.data},function(r){a(".vispa-app").html(r),t.render("nav","vispa-nav"),a(".vispa-nav-phone span.layui-nav-more").remove()})}})}})},u.req=function(o){if("string"!=typeof o.url)throw TypeError("opt.url类型错误");o.url+="?v="+layui.cache.version;var e=i.req;if("object"!=typeof o)throw new TypeError("opt参数必须是对象");if(o.constructor===Array)throw new TypeError("opt参数不能是数组");if("function"==typeof o.error){var t=o.error;delete o.error}a.ajax(a.extend({type:"post",dataType:"json",success:function(r){r[e.code]===e.ok?"function"==typeof o.done&&o.done(r):r[e.code]===e.logout?n.logout():/^\d+$/.test(r[e.code])?"function"==typeof o.err&&o.err(r):"function"==typeof o.success?o.success(r):function(){throw n.Error("VispaError",["Code：undefined","Error：code值不存在"]),Error("opt.success不存在，并且没有code值")}()},error:function(r){t?t(r):n.Error("ajaxError",["Code："+r.status,"Error："+r.statusText])}},o))},u.url=function(r){var o=a.extend({vi:r},i.url_param),e=[];for(var t in o)e.push(t+"="+o[t]);return location.origin+location.pathname+"?"+e.join("&")},o.color=function(){var r=i.nav_color,o=[];if(/^\#[\da-z]{3}$/i.test(r[1]))for(var e=r[1].substr(1,3).split(""),t=0;n=e[t];t++)o.push(n+n);else{if(!/^\#[\da-z]{6}$/i.test(r[1]))throw new Error("导航栏字体颜色异常，请检查config.js是否正确配置");for(e=r[1].substr(1,6).split(""),t=0;n=e[t++];)o.push(n+e[t++])}var n,a=[];for(t=0;n=o[t++];)a.push(parseInt(n,16));a.push(.8),i.nav_color.push("rgba("+a.join(",")+")")},u}(layui.layer,layui.command,layui.laytpl,layui.element))})}(this);